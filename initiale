Contexte projet :
Projet Laravel 12 + Inertia + React nommÃ© e-commerce
Authentification avec Laravel Breeze
RÃ´les & permissions gÃ©rÃ©s par spatie/laravel-permission
Gestion dâ€™images via Intervention Image
API & sÃ©curisation avec Laravel Sanctum
Helpers & migrations avancÃ©es via doctrine/dbal
Front construit avec React + Inertia.js + Vite (ne pas toucher)
DB : PostgreSQL via Supabase
Structure projet Laravel :
app/Enums
app/Services
app/DTOs
app/Actions
ğŸ”¹ Remarque importante pour lâ€™IA / expert backend :
Les diagrammes UML ont dÃ©jÃ  Ã©tÃ© validÃ©s. Il ne faut pas les recrÃ©er.
Le backend doit Ãªtre cohÃ©rent avec ces diagrammes finaux.
Ne rien changer cÃ´tÃ© front (React/Inertia) mais prÃ©parer toutes les routes, controllers, models, migrations, seeders et API nÃ©cessaires pour que le front puisse se connecter immÃ©diatement.
Respecter strictement les fonctionnalitÃ©s validÃ©es et les relations BDD.
Ne rien ajouter ni supprimer dans les fonctionnalitÃ©s.
ğŸ”¹ Diagrammes UML fournis (Ã  utiliser directement) :
Use Case (Cas dâ€™utilisation) â€“ Client, Admin, Visiteur, Service SMS, Pixel Ads
Classes / EntitÃ©s â€“ Produits, CatÃ©gories, Sous-CatÃ©gories, Clients, Commandes, Panier, Codes promo, Points fidÃ©litÃ©, Pixels, SociÃ©tÃ© de livraison, Tarifs, etc.
SÃ©quence (Achat) â€“ Ajout au panier, paiement, statut commande, gÃ©nÃ©ration pixel purchase
ActivitÃ© â€“ Flux de commande, gestion livraison, utilisation points, gÃ©nÃ©ration facture / bon de livraison
(tu dois utiliser ces diagrammes comme rÃ©fÃ©rence exacte pour coder le backend.)
ğŸ”¹ Instructions Backend
Models & Migrations
CrÃ©er toutes les tables en PostgreSQL via Supabase
Inclure relations (OneToMany, ManyToMany, etc.) selon diagrammes
Ajouter colonnes nÃ©cessaires pour tarification, fidÃ©litÃ©, pixels, codes promo
Controllers & Actions
CRUD complet pour produits, catÃ©gories, sous-catÃ©gories
Gestion commandes et panier
Gestion points fidÃ©litÃ© et rÃ©duction
Gestion codes promo
Gestion sociÃ©tÃ©s de livraison et tarifs par wilaya/type
Services & Enums
Statuts commandes, types livraison, pixel events, fidÃ©litÃ©
API & SÃ©curitÃ©
Utiliser Sanctum pour sÃ©curiser API
Routes API pour coordination avec React/Inertia
Seeds / Defaults
Seed roles & permissions (Admin / Client)
Seed wilayas / tarifs par dÃ©faut
Seed statuts commandes, types livraison, pixels
Image Uploads
GÃ©rer via Intervention Image pour produits
Helpers & DTOs
PrÃ©parer DTOs et actions pour faciliter logique mÃ©tier
Assurer que tout est prÃªt pour interaction front-back
ğŸ”¹ Objectif final
Backend prÃªt Ã  lâ€™emploi, correspondant exactement aux diagrammes UML validÃ©s, pour un projet Laravel 12 + React/Inertia.
Tout le front reste intact, mais backend fournit toutes les routes et logiques nÃ©cessaires pour que React puisse consommer les donnÃ©es immÃ©diatement.
Documentation interne des fichiers et classes pour coordination future.
ğŸ’¡ Note pour lâ€™expert IA / humain :
"Ne modifie aucun diagramme UML ni aucune fonctionnalitÃ© front existante. Ton rÃ´le est strictement backend, mais tu dois prÃ©parer tout ce qui est nÃ©cessaire pour que le front React/Inertia fonctionne avec le backend Laravel dÃ¨s maintenant." voici les 4 diagramme de uml de site :1ï¸âƒ£ Diagramme de Cas dâ€™Utilisation (Use Case) â€” FINAL

Visiteur
â”œâ”€ Consulter produits
â”œâ”€ Rechercher produits
â”œâ”€ Voir promotions
â”œâ”€ Commander produit (direct ou via panier)
â””â”€ Utiliser code promo

Client
â”œâ”€ Commander produit (direct ou via panier)
â”œâ”€ Consulter / modifier profil
â”œâ”€ RÃ©initialiser mot de passe (SMS)
â”œâ”€ VÃ©rifier tÃ©lÃ©phone (SMS)
â”œâ”€ Utiliser points fidÃ©litÃ©
â”œâ”€ Voir historique commandes
â””â”€ Voir points / codes promo

Admin
â”œâ”€ Dashboard (commandes, revenus, wilayas)
â”œâ”€ GÃ©rer produits, catÃ©gories, sous-catÃ©gories, spÃ©cifications
â”œâ”€ GÃ©rer commandes (statuts)
â”œâ”€ GÃ©rer clients
â”œâ”€ GÃ©rer fidÃ©litÃ© (points, conversions)
â”œâ”€ GÃ©rer livraison (tarifs, activer/masquer wilaya)
â”œâ”€ GÃ©rer promotions (codes)
â””â”€ Configurer Pixels / Settings

Service SMS
â”œâ”€ Envoyer OTP (inscription / numÃ©ro tÃ©lÃ©phone)
â””â”€ Envoyer code rÃ©initialisation mot de passe

Pixel
â””â”€ Track Purchase (aprÃ¨s confirmation commande)
2ï¸âƒ£ Diagramme de Classes (Class Diagram) â€” FINAL

User- id- phone- password- role- status
1 â”€ 0..1 Client

Client- id- user_id- first_name- last_name- phone- wilaya_id- commune_id- address

Category- id- name- active
1 â”€ * SubCategory

SubCategory- id- category_id- name- active
1 â”€ * Specification

Specification- id- subcategory_id- name- required

Product- id- subcategory_id- name- description- price- stock- status (Actif / Hors stock)
1 â”€ * ProductSpecificationValue
1 â”€ * ProductImage

ProductSpecificationValue- id- product_id- specification_id- value

ProductImage- id- product_id- url

Cart- id- client_id (nullable pour visiteur)
1 â”€ * CartItem

CartItem- id- cart_id- product_id- quantity- price_snapshot

Order- id- client_id (nullable pour visiteur)- first_name- last_name- phone- wilaya_name- commune_name- address- delivery_type- delivery_price- products_total- discount_total- total_price- status
1 â”€ * OrderItem

OrderItem- id- order_id- product_id- quantity- price_snapshot

Wilaya- id- name- is_active
1 â”€ * Commune
1 â”€ * DeliveryTariff

Commune- id- name- wilaya_id

DeliveryTariff- id- wilaya_id- type (DOMICILE / BUREAU)- price- is_active

LoyaltyPoint- id- client_id- points- description

PromoCode- id- code- type (partageable / personnel)- discount_value- max_use- expiry_date- is_active

PixelSetting- id- meta_pixel_id- google_pixel_id- is_active
Note : client_id nullable dans Cart et Order pour permettre aux visiteurs de commander.
3ï¸âƒ£ Diagramme de SÃ©quence (Sequence Diagram) â€” Achat FINAL
ScÃ©nario : Client ou Visiteur

Client/Visiteur
â†“
Frontend (Page produit / Panier)
â†“ remplir formulaire (obligatoire pour visiteur)
Choix livraison (domicile / bureau)
â†“
Backend OrderService
â†“ rÃ©cupÃ©rer DeliveryTariff
â†“ calcul total
â†“ crÃ©er Order (snapshot)
â†“
PixelService â†’ dÃ©clenche Purchase (transparent)Order â†’ statut En attente[Fin]
Notes :

Visiteur nâ€™a pas de points fidÃ©litÃ©
Client connectÃ© peut utiliser points (optionnel)
Service SMS non utilisÃ© pour commande
4ï¸âƒ£ Diagramme dâ€™ActivitÃ© (Activity Diagram) â€” Commande FINAL

[DÃ©but]
â†“
Client connectÃ© ?
â”œâ”€â”€ Oui
â”‚ â†“ prÃ©-remplir formulaire
â”‚ â†“ modifier si besoin (nâ€™affecte pas valeurs par dÃ©faut)
â”‚
â””â”€â”€ Non
â†“ remplir formulaire (obligatoire)
â†“
Choix livraison (domicile / bureau)
â†“
Appliquer code promo si existe
â†“
Calcul total :
produits_total + livraison - rÃ©duction
â†“
CrÃ©er commande (snapshot)
â†“
Pixel Purchase dÃ©clenchÃ©
â†“
Commande enregistrÃ©e (statut En attente)
[Fin] 
.ton travail est de annalyser bien ce message et au tant que un expert en
 laravek 12 +inertia js +react